<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
    <title>Wi-fi controlled car with camera</title>
	<script src="jquery.js"></script>
    <script type="text/javascript">
	
    var startPolling = false;
	var polling = false;
	
$( document ).ready(function() {
    log( "ready!" );
	
$("body" ).keydown(function( e ) {
var code = e.which;
  if ( code == 13 ) {
   e.preventDefault();
  }
 if (code == 87) {
 	//log("w");
    startPoll();
  }
  return true;
});

$("body" ).keyup(function( e ) {
var code = e.which;
  if (code == 13 ) {
   e.preventDefault();
  }
  if (code == 87) {
  log("u");
    startPolling = false;
  }
  return true;
});
	
});
	
//	var running = false;
	
	function startPoll() {
	    if (polling) {
			return;
		}
	    startPolling = true;
		poll();
	}
	
	var poll = function() {
	log("p");
	    polling = true;
		if (!startPolling) {
			return;
		}
//	running = true;
    $.ajax({
        url: "http://google.com",
        type: "GET",
        success: function(data) {
            
        },
        dataType: "html",
        complete: function() {
		    log("c");
		    //running = false;
		    if (startPolling) {
			    setTimeout(function() {poll()}, 1000);
			}
		},
    })
};

function log(str) {
	$("#log").append(str);
}

   </script>
</head>
<body>
<table >

    <tr>
        <td>
		<button type="button" >Forward</button><br>
        <button type="button" >Left</button>
        <button type="button" >Right</button><br>
        <button type="button" >Backward</button>
              
        </td>
    </tr>
</table>

<div id="log">
</div>

</body>
</html>